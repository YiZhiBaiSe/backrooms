<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂêéÂÆ§ÊäΩÂç°Ê®°ÊãüÂô® V2 - ÊØîÁâπÂ∏ÅÁâà</title>
    <style>
        /*region Google Fonts Import */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400&display=swap');
        /*endregion*/

        /*region CSS Variables */
        :root {
            /* Core Cyberpunk Colors */
            --cyber-bg: #0a0a1a;             /* Deep space blue/black */
            --cyber-primary: #00ffff;        /* Bright Cyan */
            --cyber-secondary: #ff00ff;      /* Bright Magenta */
            --cyber-accent: #ffff00;         /* Bright Yellow */
            --cyber-text: #e0e0e0;           /* Light grey/white text */
            --cyber-text-darker: #a0a0a0;    /* Darker grey text */
            --cyber-border-glow: rgba(0, 255, 255, 0.5); /* Cyan glow */
            --cyber-shadow: rgba(0, 0, 0, 0.6);

            /* Rarity Colors */
            --rarity-common: #aaaaaa;       /* Grey */
            --rarity-uncommon: #4caf50;      /* Green */
            --rarity-rare: #2196f3;          /* Blue */
            --rarity-epic: #9c27b0;           /* Purple */
            --rarity-legendary: #ffc107;     /* Gold */

            /* UI Element Specifics */
            --bitcoin-bg: rgba(255, 193, 7, 0.1);  /* Light gold transparent bg */
            --bitcoin-border: var(--rarity-legendary);
            --bitcoin-text: var(--rarity-legendary);
            --button-disabled-opacity: 0.4;
        }
        /*endregion*/

        /*region Base Body & Background Styles */
        body {
            background-color: var(--cyber-bg);
            color: var(--cyber-text);
            font-family: 'Noto Sans SC', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-y: auto;   /* Allow vertical scroll */
            overflow-x: hidden;   /* Prevent horizontal scroll */
            position: relative; /* Needed for pseudo-elements */
            font-size: 16px; /* Base font size */
        }

        /* Cyber Lines Background Animation */
        /* These pseudo-elements create the moving grid effect */
        body::before, body::after {
            content: '';
            position: fixed; /* Use fixed so they don't scroll with content */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1; /* Place behind all content */
        }

        /* Diagonal cyan lines */
        body::before {
            background:
                linear-gradient(45deg, transparent 49.5%, var(--cyber-primary) 49.5%, var(--cyber-primary) 50.5%, transparent 50.5%),
                linear-gradient(-45deg, transparent 49.5%, var(--cyber-primary) 49.5%, var(--cyber-primary) 50.5%, transparent 50.5%);
            background-size: 70px 70px; /* Grid size */
            opacity: 0.08; /* Subtle effect */
            animation: moveLines 12s linear infinite;
        }

        /* Horizontal/Vertical magenta lines */
        body::after {
             background:
                linear-gradient(0deg, transparent 49.5%, var(--cyber-secondary) 49.5%, var(--cyber-secondary) 50.5%, transparent 50.5%),
                linear-gradient(90deg, transparent 49.5%, var(--cyber-secondary) 49.5%, var(--cyber-secondary) 50.5%, transparent 50.5%);
            background-size: 90px 90px; /* Different grid size */
            opacity: 0.06; /* Even more subtle */
            animation: moveLinesReverse 18s linear infinite; /* Slower, different direction */
        }

        /* Keyframes for background line movement */
        @keyframes moveLines {
            0% { background-position: 0 0; }
            100% { background-position: 140px 70px; } /* Moves diagonally */
        }
         @keyframes moveLinesReverse {
            0% { background-position: 0 0; }
            100% { background-position: -180px -90px; } /* Moves diagonally opposite */
        }
        /*endregion*/

        /*region Main Container & Title */
        .simulator-container {
            text-align: center;
            padding: 30px 40px; /* More horizontal padding */
            background: rgba(10, 10, 30, 0.85); /* Slightly less transparent */
            border: 1px solid var(--cyber-primary);
            box-shadow: 0 0 20px var(--cyber-border-glow), inset 0 0 15px var(--cyber-secondary);
            border-radius: 12px; /* Slightly more rounded */
            margin-top: 80px; /* More space from top due to Bitcoin display */
            margin-bottom: 50px;
            position: relative;
            z-index: 1;
            max-width: 90%; /* Max width */
            width: 1100px; /* Fixed width for better grid control on large screens */
            box-sizing: border-box;
        }

        /* Main title styling */
        h1 {
            font-family: 'Orbitron', sans-serif;
            color: var(--cyber-primary);
            font-size: 2.8em; /* Adjusted size */
            text-shadow:
                0 0 5px var(--cyber-primary),
                0 0 10px var(--cyber-primary),
                0 0 15px var(--cyber-secondary),
                0 0 20px var(--cyber-secondary);
            margin-top: 10px;
            margin-bottom: 40px; /* More space below title */
            letter-spacing: 3px; /* Wider spacing */
            font-weight: 700;
        }
        /*endregion*/

        /*region Button Styles */
        .button-container {
            display: flex;
            justify-content: center;
            gap: 30px; /* Space between buttons */
            margin-bottom: 40px; /* Space below buttons */
            flex-wrap: wrap; /* Allow buttons to wrap on smaller screens */
        }

        .draw-button {
            font-family: 'Orbitron', sans-serif;
            background-color: transparent;
            border: 2px solid; /* Color set below */
            padding: 15px 30px;
            font-size: 1.1em; /* Slightly smaller */
            font-weight: 700;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
            text-shadow: 0 0 3px; /* Color set below */
            box-shadow: 0 0 8px, inset 0 0 5px rgba(255, 255, 255, 0.3); /* Color set below */
            min-width: 250px; /* Ensure buttons have decent width */
        }

        /* Normal Pool Button */
        .normal-button {
            color: var(--cyber-accent);
            border-color: var(--cyber-accent);
            text-shadow-color: var(--cyber-accent);
            box-shadow-color: var(--cyber-accent);
        }
        .normal-button:hover {
            background-color: var(--cyber-accent);
            color: var(--cyber-bg);
            box-shadow: 0 0 15px var(--cyber-accent), 0 0 25px var(--cyber-accent), inset 0 0 8px rgba(0, 0, 0, 0.7);
            text-shadow: none;
        }

        /* Premium Pool Button */
        .premium-button {
            color: var(--rarity-legendary);
            border-color: var(--rarity-legendary);
            text-shadow-color: var(--rarity-legendary);
            box-shadow-color: var(--rarity-legendary);
        }
        .premium-button:not(:disabled):hover {
            background-color: var(--rarity-legendary);
            color: var(--cyber-bg);
            box-shadow: 0 0 15px var(--rarity-legendary), 0 0 25px var(--rarity-legendary), inset 0 0 8px rgba(0, 0, 0, 0.7);
            text-shadow: none;
        }

        /* Active (Pressed) State */
        .draw-button:active {
            transform: scale(0.96); /* Slightly less pronounced effect */
            filter: brightness(0.9);
        }

        /* Disabled State Styling */
        .draw-button:disabled {
            cursor: not-allowed;
            opacity: var(--button-disabled-opacity);
            filter: grayscale(50%);
            box-shadow: none;
            /* Prevent hover effects on disabled state */
            pointer-events: none;
        }
        /*endregion*/

        /*region Card Display & Card Styles */
        .card-display {
            display: grid;
            /* Aim for 5 columns, but allow flexibility */
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px; /* Increased gap */
            margin-top: 30px;
            min-height: 250px;
            perspective: 1200px; /* Enhanced 3D perspective */
            padding: 10px; /* Add padding inside the display area */
        }

        /* Individual Card Styling */
        .card {
            background: linear-gradient(145deg, rgba(30, 30, 50, 0.95), rgba(40, 40, 60, 0.9)); /* Subtle gradient */
            border: 2px solid; /* Rarity color set by class */
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 10px var(--cyber-shadow);
            text-align: left;
            opacity: 0; /* Start hidden for animation */
            animation: fadeInCard 0.6s ease-out forwards; /* Slower fade-in */
            transform-style: preserve-3d;
            transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother transition */
            position: relative;
            overflow: hidden; /* Prevent glow spill */
            display: flex;
            flex-direction: column;
            min-height: 280px; /* Increased min-height for more content */
            box-sizing: border-box;
        }

        /* Card Fade-in Animation Keyframes */
        @keyframes fadeInCard {
            from {
                opacity: 0;
                transform: translateY(30px) rotateX(-15deg) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) rotateX(0deg) scale(1);
            }
        }

        /* Staggered Animation Delays (applied via JS now for flexibility) */
        /* Example delays (these specific nth-child rules are removed in favor of JS delay calculation) */
        /* .card:nth-child(1) { animation-delay: 0.6s; } ... etc */

        /* Card Hover Effect */
        .card:hover {
             transform: translateY(-8px) scale(1.04) rotateX(5deg); /* More pronounced hover */
             box-shadow: 0 12px 24px rgba(0, 0, 0, 0.7);
             z-index: 5; /* Bring hovered card to front */
        }

        /* Card Content Sections */
        .card-content {
            flex-grow: 1; /* Allows description to fill space */
            margin-bottom: 10px;
        }

        .card-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.15em; /* Slightly larger */
            font-weight: 700;
            margin-bottom: 8px;
            /* Rarity color applied dynamically */
        }

        .card-type {
            font-size: 0.85em;
            color: var(--cyber-primary); /* Consistent cyan for type */
            margin-bottom: 12px;
            font-style: italic;
            font-weight: 300;
        }

        .card-description {
            font-size: 0.9em;
            color: var(--cyber-text);
            line-height: 1.5; /* Improved readability */
            margin-bottom: 10px;
            font-weight: 300;
        }

        .card-rarity {
            font-size: 0.85em;
            font-weight: bold;
            text-align: right;
            margin-top: auto; /* Pushes to bottom in flex container */
            /* Rarity color applied dynamically */
        }
        /*endregion*/

        /*region Rarity Specific Styles */
        /* Border Colors */
        .rarity-common { border-color: var(--rarity-common); }
        .rarity-uncommon { border-color: var(--rarity-uncommon); }
        .rarity-rare { border-color: var(--rarity-rare); }
        .rarity-epic { border-color: var(--rarity-epic); }
        .rarity-legendary { border-color: var(--rarity-legendary); }

        /* Text Colors for Name & Rarity */
        .rarity-common .card-name, .rarity-common .card-rarity { color: var(--rarity-common); }
        .rarity-uncommon .card-name, .rarity-uncommon .card-rarity { color: var(--rarity-uncommon); }
        .rarity-rare .card-name, .rarity-rare .card-rarity { color: var(--rarity-rare); }
        .rarity-epic .card-name, .rarity-epic .card-rarity { color: var(--rarity-epic); text-shadow: 0 0 4px var(--rarity-epic); }
        .rarity-legendary .card-name, .rarity-legendary .card-rarity { color: var(--rarity-legendary); text-shadow: 0 0 6px var(--rarity-legendary); }

        /* Rarity Glow Effect (using ::before pseudo-element) */
        /* Only applied to Rare and above */
        .rarity-rare::before,
        .rarity-epic::before,
        .rarity-legendary::before {
            content: '';
            position: absolute;
            top: -4px; left: -4px; right: -4px; bottom: -4px; /* Extends slightly beyond border */
            border-radius: 13px; /* Match card radius + border */
            z-index: -1; /* Behind card content */
            opacity: 0; /* Start hidden, shown on higher rarities */
            transition: opacity 0.4s ease;
        }

        .rarity-rare::before { box-shadow: 0 0 10px 3px var(--rarity-rare); opacity: 0.6; }
        .rarity-epic::before { box-shadow: 0 0 14px 4px var(--rarity-epic); opacity: 0.7; }
        .rarity-legendary::before {
            box-shadow: 0 0 18px 5px var(--rarity-legendary);
            opacity: 0.8;
            animation: pulseLegendary 2.5s infinite alternate ease-in-out; /* Smoother pulsing */
        }

        /* Legendary Pulse Animation */
        @keyframes pulseLegendary {
            from {
                box-shadow: 0 0 18px 5px var(--rarity-legendary);
                opacity: 0.7;
            }
            to {
                box-shadow: 0 0 28px 7px var(--rarity-legendary);
                opacity: 0.95;
            }
        }
        /*endregion*/

        /*region Draw Animation Overlay */
        /* This covers the screen during the draw 'reveal' */
        .draw-animation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 10, 0.8); /* Darker overlay */
            z-index: 100; /* High z-index to cover everything */
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease-in-out;
        }
        .draw-animation-overlay.active {
             opacity: 1;
             pointer-events: auto; /* Allow interaction if needed, though usually brief */
        }

        /* Container for converging lines */
        .converging-lines {
            position: relative;
            width: 350px; /* Larger animation area */
            height: 350px;
        }

        /* Individual line styling */
        .line {
            position: absolute;
            background-color: var(--cyber-primary);
            box-shadow: 0 0 6px var(--cyber-primary), 0 0 12px var(--cyber-secondary);
            opacity: 0; /* Start invisible */
            transform-origin: center center;
        }

        /* Line Animations - Keeping existing simple converge for now */
        /* More complex animations could be added here */
        .line.l1 { top: 50%; left: -60px; width: 60px; height: 3px; animation: converge1 0.9s ease-out forwards 0.1s; }
        .line.l2 { top: 50%; right: -60px; width: 60px; height: 3px; animation: converge2 0.9s ease-out forwards 0.1s; }
        .line.l3 { left: 50%; top: -60px; height: 60px; width: 3px; animation: converge3 0.9s ease-out forwards 0.2s; }
        .line.l4 { left: 50%; bottom: -60px; height: 60px; width: 3px; animation: converge4 0.9s ease-out forwards 0.2s; }
        .line.l5 { top: 0; left: 0; width: 4px; height: 4px; transform: translate(-60px, -60px); animation: convergeDiag1 1.0s ease-in-out forwards 0.3s; background-color: var(--cyber-accent); box-shadow: 0 0 6px var(--cyber-accent); border-radius: 50%; }
        .line.l6 { top: 0; right: 0; width: 4px; height: 4px; transform: translate(60px, -60px); animation: convergeDiag2 1.0s ease-in-out forwards 0.3s; background-color: var(--cyber-accent); box-shadow: 0 0 6px var(--cyber-accent); border-radius: 50%; }
        .line.l7 { bottom: 0; left: 0; width: 4px; height: 4px; transform: translate(-60px, 60px); animation: convergeDiag3 1.0s ease-in-out forwards 0.3s; background-color: var(--cyber-accent); box-shadow: 0 0 6px var(--cyber-accent); border-radius: 50%; }
        .line.l8 { bottom: 0; right: 0; width: 4px; height: 4px; transform: translate(60px, 60px); animation: convergeDiag4 1.0s ease-in-out forwards 0.3s; background-color: var(--cyber-accent); box-shadow: 0 0 6px var(--cyber-accent); border-radius: 50%; }

        /* Keyframes for Converging Lines */
        @keyframes converge1 { 0% { left: -60px; opacity: 1; transform: translateX(0) scaleX(1); } 100% { left: 50%; opacity: 0; transform: translateX(-50%) scaleX(0.1); } }
        @keyframes converge2 { 0% { right: -60px; opacity: 1; transform: translateX(0) scaleX(1); } 100% { right: 50%; opacity: 0; transform: translateX(50%) scaleX(0.1); } }
        @keyframes converge3 { 0% { top: -60px; opacity: 1; transform: translateY(0) scaleY(1); } 100% { top: 50%; opacity: 0; transform: translateY(-50%) scaleY(0.1); } }
        @keyframes converge4 { 0% { bottom: -60px; opacity: 1; transform: translateY(0) scaleY(1); } 100% { bottom: 50%; opacity: 0; transform: translateY(50%) scaleY(0.1); } }
        @keyframes convergeDiag1 { 0% { opacity: 1; transform: translate(-60px, -60px) scale(1.2); } 100% { opacity: 0; transform: translate(calc(50% - 2px), calc(50% - 2px)) scale(0); } } /* Target center */
        @keyframes convergeDiag2 { 0% { opacity: 1; transform: translate(60px, -60px) scale(1.2); } 100% { opacity: 0; transform: translate(calc(-50% + 2px), calc(50% - 2px)) scale(0); } }
        @keyframes convergeDiag3 { 0% { opacity: 1; transform: translate(-60px, 60px) scale(1.2); } 100% { opacity: 0; transform: translate(calc(50% - 2px), calc(-50% + 2px)) scale(0); } }
        @keyframes convergeDiag4 { 0% { opacity: 1; transform: translate(60px, 60px) scale(1.2); } 100% { opacity: 0; transform: translate(calc(-50% + 2px), calc(-50% + 2px)) scale(0); } }
        /*endregion*/

        /*region Bitcoin Display */
        .bitcoin-display {
            position: fixed; /* Fixed position on screen */
            top: 15px;
            right: 20px;
            background: var(--bitcoin-bg);
            border: 1px solid var(--bitcoin-border);
            padding: 8px 15px;
            border-radius: 5px;
            color: var(--bitcoin-text);
            font-family: 'Orbitron', sans-serif;
            font-size: 1em;
            font-weight: 700;
            z-index: 101; /* Above overlay during animation */
            box-shadow: 0 0 10px var(--bitcoin-border);
            transition: transform 0.3s ease, box-shadow 0.3s ease; /* Animation on update */
        }
        .bitcoin-display.updated { /* Class added briefly on update */
             transform: scale(1.1);
             box-shadow: 0 0 15px var(--bitcoin-border), 0 0 25px var(--bitcoin-border);
        }
        /*endregion*/

        /*region Responsive Design */
        @media (max-width: 1200px) {
            .simulator-container {
                width: 95%; /* Use percentage width */
                max-width: none; /* Remove fixed width */
                padding: 25px 30px;
            }
             .card-display {
                grid-template-columns: repeat(auto-fit, minmax(190px, 1fr)); /* Adjust minmax */
            }
        }

        @media (max-width: 768px) {
            body { font-size: 15px; }
            h1 { font-size: 2.2em; letter-spacing: 2px; margin-bottom: 30px;}
            .simulator-container { padding: 20px; margin-top: 70px; }
            .button-container { flex-direction: column; gap: 15px; align-items: center; margin-bottom: 30px;}
            .draw-button { min-width: 80%; padding: 12px 20px; font-size: 1em;}
            .card-display { grid-template-columns: repeat(auto-fit, minmax(170px, 1fr)); gap: 15px; }
            .card { min-height: 260px; } /* Adjust height */
            .bitcoin-display { font-size: 0.9em; padding: 6px 10px; right: 10px; top: 10px;}
        }

        @media (max-width: 480px) {
            body { font-size: 14px; }
            h1 { font-size: 1.8em; }
            .simulator-container { padding: 15px; }
            .card-display { grid-template-columns: 1fr; } /* Single column */
            .card { min-height: auto; } /* Auto height in single column */
            .card-name { font-size: 1.1em; }
            .card-description { font-size: 0.85em; }
        }
        /*endregion*/

    </style>
</head>
<body>

<!-- ÈÇÆÁÆ±ÊåâÈíÆ -->
<button id="mailButton" class="draw-button premium-button" style="position: fixed; top: 15px; left: 20px; z-index: 102;">üì¨ ÈÇÆÁÆ±</button>

<!-- ÈÇÆÁÆ±ÂºπÁ™ó -->
<div id="mailModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
    background: rgba(20, 20, 40, 0.95); border: 2px solid var(--cyber-primary); border-radius: 10px;
    padding: 30px; z-index: 200; width: 90%; max-width: 500px; box-shadow: 0 0 20px var(--cyber-border-glow); color: var(--cyber-text);">
    <h2 style="color: var(--cyber-accent); font-family: 'Orbitron', sans-serif;">üéâ ÊÑüË∞¢‰Ω†ÁöÑÊ∏∏Áé©ÔºÅ</h2>
    <p style="margin-top: 10px; line-height: 1.8;">‰Ωú‰∏∫ÂºÄÂèëÂõ¢ÈòüÁöÑ‰∏ÄÁÇπÂøÉÊÑèÔºåÂ∑≤ÈôÑËµ† <strong style="color: var(--rarity-legendary);">5 ÊûöÊØîÁâπÂ∏Å</strong> Âà∞‰Ω†ÁöÑË¥¶Êà∑‰∏≠„ÄÇ</p>
    <p>Á•ù‰Ω†Âú®ÂêéÂÆ§‰∏≠Â•ΩËøêËøûËøûÔºåÊäΩÂà∞‰º†ËØ¥‰∏≠ÁöÑ‚ÄúÊù∞Áëû‚ÄùÔºÅ</p>
    <button id="closeMail" class="draw-button normal-button" style="margin-top: 20px;">ÂÖ≥Èó≠</button>
</div>


    <div class="bitcoin-display" id="bitcoinDisplay">ÊØîÁâπÂ∏Å: 0</div>

    <div class="simulator-container">
        <h1>ÂêéÂÆ§ÊäΩÂç°Ê®°ÊãüÂô®</h1>

        <div class="button-container">
            <button class="draw-button normal-button" id="drawNormalButton">ÊäΩÂèñÊôÆÈÄöÂç°ÂåÖ (10Âº†, ÂÖçË¥π)</button>
            <button class="draw-button premium-button" id="drawPremiumButton" disabled>ÊäΩÂèñÈ´òÁ∫ßÂç°ÂåÖ (10Âº†, 1 BTC)</button>
        </div>

        <div class="card-display" id="cardDisplay">
            </div>
    </div>

    <div class="draw-animation-overlay" id="drawAnimationOverlay">
        <div class="converging-lines">
            <div class="line l1"></div> <div class="line l2"></div>
            <div class="line l3"></div> <div class="line l4"></div>
            <div class="line l5"></div> <div class="line l6"></div>
            <div class="line l7"></div> <div class="line l8"></div>
        </div>
    </div>

    <script>
        /**
         * Backrooms Card Simulator V2 Script
         * Includes Bitcoin currency, normal/premium pools, and expanded card set.
         * Uses localStorage for Bitcoin persistence.
         */

        //---------------------------------------------------------------------
        // Configuration & Constants
        //---------------------------------------------------------------------

        const NORMAL_PACK_SIZE = 10;
        const PREMIUM_PACK_SIZE = 10;
        const PREMIUM_PACK_COST = 1; // Cost in Bitcoin
        const BITCOIN_CHANCE_PER_NORMAL_PACK = 0.10; // 10% chance
        const ANIMATION_DURATION = 1300; // ms (slightly longer than longest animation)
        const CARD_FADE_BASE_DELAY = 500; // ms (base delay before first card fades in)
        const CARD_FADE_INCREMENT = 100; // ms (delay increment per card)

        // Local Storage Key
        const LOCAL_STORAGE_KEY = 'backrooms_bitcoin_v2';

        //---------------------------------------------------------------------
        // Card Data Definition (Expanded Pool)
        //---------------------------------------------------------------------
        // Note: Descriptions are kept relatively concise for card format.
        // More detailed lore can be found on Backrooms wikis.
        const cardPool = [
            // Common (ÁÅ∞Ëâ≤) - Approx 55-60% (Adjusted for more cards)
            // Basic elements, common entities/levels/items
            { name: "ÊµÅÊµ™ËÄÖ", type: "‰∫∫Á±ª", rarity: "Common", description: "Ëø∑Â§±Âú®ÂêéÂÆ§‰∏≠ÁöÑÊôÆÈÄö‰∫∫ÔºåÊå£ÊâéÊ±ÇÂ≠òÔºåËØïÂõæÂØªÊâæÂêå‰º¥ÊàñÂá∫Ë∑Ø„ÄÇ" },
            { name: "Êùè‰ªÅÊ∞¥ (Ê†áÂáÜË£Ö)", type: "Áâ©ÂìÅ", rarity: "Common", description: "Âü∫Á°ÄË°•ÁªôÂìÅÔºåÁï•Â∏¶ÁîúÂë≥ÔºåËÉΩÁºìËß£Âè£Ê∏¥ÂíåËΩªÂæÆÁ≤æÁ•ûÂΩ±Âìç„ÄÇ" },
            { name: "MEG Êñ∞ÊâãÂì®ÂÖµ", type: "ÁªÑÁªáÊàêÂëò (MEG)", rarity: "Common", description: "‰∏ªË¶ÅÊé¢Á¥¢ËÄÖÂõ¢‰ΩìMEGÁöÑÂàùÁ∫ßÊàêÂëòÔºåË¥üË¥£Âü∫Á°ÄÂ∑°ÈÄªÂíåÊï∞ÊçÆËÆ∞ÂΩï„ÄÇ" },
            { name: "Level 0: Â§ßÂéÖ", type: "Â±ÇÁ∫ß", rarity: "Common", description: "Ê†áÂøóÊÄßÁöÑËµ∑ÁÇπ„ÄÇÂçïË∞ÉÁöÑÈªÑËâ≤ÊàøÈó¥ÔºåÂó°È∏£ÁöÑÁÅØÂÖâÔºåÊΩÆÊπøÁöÑÂú∞ÊØØÊ∞îÂë≥„ÄÇ" },
            { name: "Èíù‰∫∫ (Duller)", type: "ÂÆû‰Ωì", rarity: "Common", description: "ÁºìÊÖ¢„ÄÅÊó†ÁâπÂæÅÁöÑ‰∫∫ÂΩ¢ÂÆû‰ΩìÔºåÈÄöÂ∏∏Êó†ÂÆ≥Ôºå‰ΩÜÁæ§‰ΩìËÅöÈõÜÊó∂ÈúÄÂ∞èÂøÉ„ÄÇ" },
            { name: "Level 1: ÂÆúÂ±ÖÂú∞Â∏¶", type: "Â±ÇÁ∫ß", rarity: "Common", description: "Â∑®Â§ßÁöÑ‰ªìÂ∫ìËà¨Á©∫Èó¥ÔºåÊúâÁ®≥ÂÆöÁöÑÁîµÂäõÂíåÂÅ∂Â∞îÁöÑË°•ÁªôÁÇπÔºåÁõ∏ÂØπÂÆâÂÖ®„ÄÇ" },
            { name: "ÁåéÁä¨ (Hound)", type: "ÂÆû‰Ωì", rarity: "Common", description: "ÂÖ∑ÊúâÊîªÂáªÊÄßÁöÑÁä¨Á±ªÂÆû‰ΩìÔºå‰æùÈù†Â£∞Èü≥ÂíåÊ∞îÂë≥ËøΩË∏™ÔºåÈÄöÂ∏∏ÊàêÁæ§Ê¥ªÂä®„ÄÇ" },
            { name: "ÊçüÂùèÁöÑÁªàÁ´Ø", type: "‰∫§‰∫íÁÇπ", rarity: "Common", description: "ÂÅ∂Â∞îËÉΩÊâæÂà∞ÁöÑÊóßÂºèËÆ°ÁÆóÊú∫ÁªàÁ´ØÔºåÂ§ßÈÉ®ÂàÜ‰ø°ÊÅØÂ∑≤‰∏¢Â§±ÊàñÊçüÂùè„ÄÇ" },
            { name: "Ê≤πÂ∏É", type: "Áâ©ÂìÅ", rarity: "Common", description: "‰∏ÄÂùóÊôÆÈÄöÁöÑÊ≤πÂ∏ÉÔºåÊúâÊó∂ËÉΩÊèê‰æõÊöÇÊó∂ÁöÑÂ∫áÊä§ÊàñÁî®‰∫éÁÆÄÂçïÁöÑ‰º™Ë£Ö„ÄÇ" },
            { name: "Level 2: ÁÆ°ÁΩëËø∑ÂÆ´", type: "Â±ÇÁ∫ß", rarity: "Common", description: "ÂÖÖÊñ•ÁùÄÊªöÁÉ´ÁÆ°ÈÅìÂíåËí∏Ê±ΩÁöÑÁª¥Êä§ÈÄöÈÅìÔºåÁéØÂ¢ÉÊÅ∂Âä£ÔºåÂÆπÊòìËø∑Ë∑Ø„ÄÇ" },
            { name: "ËçßÂÖâÊ£í", type: "Áâ©ÂìÅ", rarity: "Common", description: "‰∏ÄÊ¨°ÊÄßÂÖâÊ∫êÔºåÊèê‰æõÊúâÈôêÊó∂Èó¥ÁöÑÁÖßÊòéÔºåÊúâÊó∂ËÉΩÂê∏ÂºïÊàñÈ©±Ëµ∂ÁâπÂÆöÂÆû‰Ωì„ÄÇ" },
            { name: "ÊàêÂπ¥Èù¢ÁÅµ", type: "ÂÆû‰Ωì", rarity: "Common", description: "ÊàêÁÜüÂΩ¢ÊÄÅÁöÑÈù¢ÈÉ®Á©∫ÁôΩÂÆû‰ΩìÔºåÊØîÂπº‰ΩìÊõ¥ÂÖ∑Â®ÅËÉÅÊÄßÔºåË°å‰∏∫Êõ¥Âä†Èöæ‰ª•È¢ÑÊµã„ÄÇ" },
            { name: "‰∏ÄÂ∞èË¢ãÁÅ´Êü¥", type: "Áâ©ÂìÅ", rarity: "Common", description: "Âü∫Á°ÄÁÇπÁÅ´Â∑•ÂÖ∑ÔºåÂú®ÊΩÆÊπøÁéØÂ¢É‰∏≠ÂèØËÉΩÂ§±ÊïàÔºå‰ΩÜËÅäËÉú‰∫éÊó†„ÄÇ" },
            { name: "MEG ÂêéÂã§‰∫∫Âëò", type: "ÁªÑÁªáÊàêÂëò (MEG)", rarity: "Common", description: "Ë¥üË¥£Áª¥Êä§ÂâçÂì®Á´ôÂíåËøêËæìÁâ©ËµÑÁöÑMEGÊàêÂëòÔºåÈÄöÂ∏∏‰∏çÂèÇ‰∏é‰∏ÄÁ∫øÊé¢Á¥¢„ÄÇ" },
            { name: "Level 3: ÂèëÁîµÁ´ô", type: "Â±ÇÁ∫ß", rarity: "Common", description: "Áã≠Á™ÑÁöÑËµ∞ÂªäÂíåÂ∑®Â§ßÁöÑÂèëÁîµÊú∫ÊàøÔºåÊåÅÁª≠ÁöÑÂô™Èü≥ÂíåÁîµÂºßÂèØËÉΩÈÄ†ÊàêÂç±Èô©„ÄÇ" },
            { name: "ÁΩêË£ÖË±ÜÂ≠ê", type: "Áâ©ÂìÅ", rarity: "Common", description: "‰∏ÄÁßçÂ∏∏ËßÅÁöÑÈ£üÁâ©Ë°•ÁªôÔºåÂë≥ÈÅìÂπ≥Ê∑°Ôºå‰ΩÜËÉΩÊèê‰æõÂøÖË¶ÅÁöÑËÉΩÈáè„ÄÇ" },
            { name: "ÂπºÂπ¥Èù¢ÁÅµ", type: "ÂÆû‰Ωì", rarity: "Common", description: "Â≠©Á´•ÂΩ¢ÊÄÅÁöÑÈù¢ÈÉ®Á©∫ÁôΩÂÆû‰ΩìÔºåÂ•ΩÂ•áÂøÉÂº∫ÔºåÊúâÊó∂‰ºöÊ®°‰ªø‰ªñ‰∫∫Ë°å‰∏∫„ÄÇ" },
            { name: "Á†¥ÊçüÁöÑÂú∞ÂõæÁ¢éÁâá", type: "‰ø°ÊÅØ", rarity: "Common", description: "‰∏ÄÂº†Âá†‰πéÊó†Ê≥ïËæ®ËÆ§ÁöÑÂú∞ÂõæÊÆãÁâáÔºåÂèØËÉΩÊåáÂêëÊüê‰∏™Âå∫ÂüüÔºå‰πüÂèØËÉΩÊØ´Êó†Áî®Â§Ñ„ÄÇ" },

            // Uncommon (ÁªøËâ≤) - Approx 25%
            // More dangerous/useful elements, notable but not critical lore points
            { name: "Á™ÉÁöÆËÄÖ (Skin-Stealer)", type: "ÂÆû‰Ωì", rarity: "Uncommon", description: "Ê®°‰ªø‰∫∫Á±ªÂ§ñÂΩ¢ÁöÑÂÆû‰ΩìÔºå‰ºöÂâ•‰∏ãÂèóÂÆ≥ËÄÖÁöÑÁöÆËÇ§Âπ∂Á©øÊà¥ÔºåÈöæ‰ª•ÂàÜËæ®„ÄÇ" },
            { name: "MEG Ë∞ÉÊü•Âëò", type: "ÁªÑÁªáÊàêÂëò (MEG)", rarity: "Uncommon", description: "ÁªèÈ™åÁõ∏ÂØπ‰∏∞ÂØåÁöÑMEGÊàêÂëòÔºåË¥üË¥£Ê∑±ÂÖ•Êé¢Á¥¢„ÄÅËÆ∞ÂΩïÂºÇÂ∏∏Áé∞Ë±°ÂíåÂÆû‰Ωì„ÄÇ" },
            { name: "Á¨ëÈ≠á (Smiler)", type: "ÂÆû‰Ωì", rarity: "Uncommon", description: "ÊΩú‰ºèÂú®ÈªëÊöó‰∏≠ÁöÑÂèëÂÖâÁ¨ëËÑ∏ÂíåÁâôÈΩøÔºåÈÄöÂ∏∏Âè™Âú®Êó†ÂÖâÁéØÂ¢É‰∏≠ÊûÑÊàêÂ®ÅËÉÅ„ÄÇ" },
            { name: "Level 4: Â∫üÂºÉÂäûÂÖ¨ÂÆ§", type: "Â±ÇÁ∫ß", rarity: "Uncommon", description: "Êó†Â∞ΩÂª∂‰º∏ÁöÑÁ©∫Êó∑ÂäûÂÖ¨Ê•ºÂ±ÇÔºåÊçÆËØ¥Êúâ‚ÄúÁ™óÊà∑‚ÄùÂÆû‰ΩìÂá∫Ê≤°ÔºåÈúÄË¶ÅÊùè‰ªÅÊ∞¥„ÄÇ" },
            { name: "ÁöáÂÆ∂Âè£Á≤Æ", type: "Áâ©ÂìÅ", rarity: "Uncommon", description: "ÊïàÊûú‰ºò‰∫éÊùè‰ªÅÊ∞¥ÁöÑÈ´òÁ∫ßË°•ÁªôÂìÅÔºåÁî±Backrooms Native Trade Group (B.N.T.G.) Áîü‰∫ß„ÄÇ" },
            { name: "UEC ÈÄöËÆØÊäÄÊúØÂëò", type: "ÁªÑÁªáÊàêÂëò (UEC)", rarity: "Uncommon", description: "ËÅîÂêàÊé¢Á¥¢ËÄÖËÅîÁõüÔºàUECÔºâÁöÑÊäÄÊúØ‰∫∫ÂëòÔºå‰∏ìÊ≥®‰∫éÁª¥Êä§ÂíåÂª∫Á´ãË∑®Â±ÇÁ∫ßÈÄöËÆØ„ÄÇ" },
            { name: "Áà¨Ë°åÁîüÁâ© (Crawler)", type: "ÂÆû‰Ωì", rarity: "Uncommon", description: "Âú®ÈÄöÈ£éÁÆ°ÈÅìÂíåÁã≠Á™ÑÁ©∫Èó¥‰∏≠Âø´ÈÄüÁßªÂä®ÁöÑËäÇËÇ¢Áä∂ÂÆû‰ΩìÔºåÂÖ∑ÊúâÊîªÂáªÊÄß„ÄÇ" },
            { name: "Level 5: ÊÅêÊÄñÊóÖÈ¶Ü", type: "Â±ÇÁ∫ß", rarity: "Uncommon", description: "Ë£ÖÈ•∞Âçé‰∏Ω‰ΩÜÊ∞îÊ∞õËØ°ÂºÇÁöÑÊ∞∏ÊÅíÊóÖÈ¶ÜÔºåÊçÆËØ¥Â±Ö‰ΩèÁùÄ‚ÄúThe Beast‚Äù„ÄÇ" },
            { name: "Ê∂≤ÊÄÅÂØÇÈùô", type: "Áâ©ÂìÅ/Áé∞Ë±°", rarity: "Uncommon", description: "‰∏ÄÁßçËÉΩÂê∏Êî∂Â£∞Èü≥ÁöÑÂ•áÂºÇÊ∂≤‰ΩìÔºåÊ∂ÇÊäπÂêéÂèØÂ§ßÂπÖÈôç‰ΩéÂô™Èü≥„ÄÇ" },
            { name: "MEG ÂâçÂì®Á´ôË°•ÁªôÁÆ±", type: "‰∫§‰∫íÁÇπ", rarity: "Uncommon", description: "MEGËÆæÁ´ãÁöÑË°•ÁªôÁÇπÔºåÂèØËÉΩÂê´ÊúâÊùè‰ªÅÊ∞¥„ÄÅÈ£üÁâ©ÊàñÁÆÄÂçïÂ∑•ÂÖ∑„ÄÇ" },
            { name: "B.N.T.G. ÂïÜ‰∫∫", type: "ÁªÑÁªáÊàêÂëò (B.N.T.G.)", rarity: "Uncommon", description: "ÂêéÂÆ§ÂéüÁîüË¥∏ÊòìÈõÜÂõ¢ÁöÑÊàêÂëòÔºåÈÄöÂ∏∏Âú®ËæÉÂÆâÂÖ®ÁöÑÂ±ÇÁ∫ßËøõË°åÁâ©ÂìÅ‰∫§Êòì„ÄÇ" },
            { name: "Level 6: ÁÜÑÁÅØ", type: "Â±ÇÁ∫ß", rarity: "Uncommon", description: "‰∏Ä‰∏™ÂÆåÂÖ®ÈªëÊöóÁöÑÂ±ÇÁ∫ßÔºåÊñπÂêëÊÑüÊûÅÊòì‰∏ßÂ§±ÔºåÊΩúËóèÁùÄ‰æùËµñÈªëÊöóÁöÑÂÆû‰Ωì„ÄÇ" },
            { name: "ËÆ∞ÂøÜË†ïËô´ (Memory Worm)", type: "ÂÆû‰Ωì", rarity: "Uncommon", description: "ÂæÆÂ∞èÁöÑË†ïËô´Áä∂ÂÆû‰ΩìÔºåÊé•Ëß¶Âêé‰ºöÂêûÂô¨ÊàñÊâ≠Êõ≤ÂèóÂÆ≥ËÄÖÁöÑËÆ∞ÂøÜ„ÄÇ" },
            { name: "Èò≤ÊØíÈù¢ÂÖ∑", type: "Áâ©ÂìÅ", rarity: "Uncommon", description: "ÂèØ‰ª•ËøáÊª§ÈÉ®ÂàÜÊúâÂÆ≥Ê∞î‰ΩìÂíåÂ≠¢Â≠êÔºåÂú®ÁâπÂÆöÊ±°ÊüìÂ±ÇÁ∫ßÈùûÂ∏∏ÊúâÁî®„ÄÇ" },
            { name: "Level 11: Êó†Â∞ΩÂüéÂ∏Ç", type: "Â±ÇÁ∫ß", rarity: "Uncommon", description: "‰∏Ä‰∏™Â∑®Â§ßÁöÑ„ÄÅÈ£éÊ†ºÈöèÊú∫ÁöÑÁé∞‰ª£ÂüéÂ∏ÇÊôØËßÇÔºå‰ºº‰πéÊ∞∏Êó†Ê≠¢Â¢É„ÄÇ" },
            { name: "Ê¥æÂØπÂ∏Ω =) ", type: "Áâ©ÂìÅ?", rarity: "Uncommon", description: "‰∏Ä‰∏™Áúã‰ººÊôÆÈÄöÁöÑÊ¥æÂØπÂ∏ΩÔºåÊà¥‰∏äÂÆÉÂèØËÉΩ‰ºöÂê¨Âà∞Â•áÊÄ™ÁöÑ‰ΩéËØ≠... ÊàñËÄÖÊõ¥Â§ö„ÄÇ" },

            // Rare (ËìùËâ≤) - Approx 10%
            // Significant threats, important locations/items, named entities/groups
            { name: "Ê¥æÂØπÂÆ¢ (Partgoer)", type: "ÂÆû‰Ωì", rarity: "Rare", description: "ÂºïËØ±ÊµÅÊµ™ËÄÖÂèÇÂä†Ê∞∏ÊÅí‚ÄúÊ¥æÂØπ‚ÄùÁöÑÂç±Èô©ÂÆû‰ΩìÔºå‰ºöÂ∞ÜÂÖ∂ËΩ¨Âåñ‰∏∫ÂêåÁ±ª„ÄÇ =( Join us!)" },
            { name: "Level Fun =)", type: "Â±ÇÁ∫ß", rarity: "Rare", description: "Áúã‰ººÂÖÖÊª°Ê¨¢‰πêÂíåÊ∞îÁêÉÁöÑÊ¥æÂØπÊàøÈó¥ÔºåÂÆûÈôÖ‰∏äÊòØÊ¥æÂØπÂÆ¢ÁöÑ‰∏ªË¶ÅÂ∑¢Á©¥ÂíåËΩ¨ÂåñÁÇπ„ÄÇ" },
            { name: "MEG ‚ÄúÈáçÈî§‚ÄùÁâπÈÅ£ÈòüÈòüÂëò", type: "ÁªÑÁªáÊàêÂëò (MEG)", rarity: "Rare", description: "Ë£ÖÂ§áÁ≤æËâØ„ÄÅËÆ≠ÁªÉÊúâÁ¥†ÁöÑMEGÊàòÊñóÁ≤æËã±ÔºåË¥üË¥£Â§ÑÁêÜÈ´òÂ®ÅËÉÅÂÆû‰ΩìÂíåÂç±Èô©Âå∫Âüü„ÄÇ" },
            { name: "Level 37: Êµ©ÁÄöÊ∑±ÊΩú (Thalassophobia)", type: "Â±ÇÁ∫ß", rarity: "Rare", description: "Â∑®Â§ßÁöÑ„ÄÅÊ∑±‰∏çËßÅÂ∫ïÁöÑÊ∞¥‰∏ãÂ±ÇÁ∫ßÔºåÂÖÖÊñ•ÁùÄÂ∫ûÂ§ßÊú™Áü•ÁöÑÊ∑±Êµ∑ÂÆû‰ΩìÂíåÂéãÂäõ„ÄÇ" },
            { name: "‚ÄúÁ™óÊà∑‚ÄùÂÆû‰Ωì (Window)", type: "ÂÆû‰Ωì", rarity: "Rare", description: "Âè™Âá∫Áé∞Âú®Á™óÊà∑ÂΩ±ÂÉè‰∏≠ÁöÑÂÆû‰ΩìÔºåÈïøÊó∂Èó¥ÂáùËßÜÂèØËÉΩÂØºËá¥Á≤æÁ•ûÂ¥©Ê∫ÉÊàñÂê∏ÂºïÂÖ∂Ê≥®ÊÑè„ÄÇ" },
            { name: "ÁÅ´Áõê (Firesalt)", type: "Áâ©ÂìÅ", rarity: "Rare", description: "‰∏ÄÁßçÊï£ÂèëÁÉ≠ÈáèÁöÑÁ®ÄÊúâÁüøÁâ©ÔºåÂèØ‰ª•ÁÇπÁáÉ„ÄÅÊèê‰æõËÉΩÈáèÔºåÊàñÈ©±Êï£Êüê‰∫õÊÉßÊÄïÂÖâÁÉ≠ÁöÑÂÆû‰Ωì„ÄÇ" },
            { name: "UEC ‚ÄúÂºÄÊãìËÄÖ‚ÄùÂ∞èÈòüÈòüÈïø", type: "ÁªÑÁªáÊàêÂëò (UEC)", rarity: "Rare", description: "UECÁöÑËµÑÊ∑±Êé¢Á¥¢ËÄÖÔºåÂ∏¶È¢ÜÂ∞èÈòüÂºÄÊãìÊú™Áü•ÊàñÈ´òÈ£éÈô©Â±ÇÁ∫ßÔºåÁªòÂà∂Ë∑ØÁ∫øÂõæ„ÄÇ" },
            { name: "Â±ÇÁ∫ßÂØÜÂåô (Level Key)", type: "Áâ©ÂìÅ", rarity: "Rare", description: "‰∏ÄÁßçÁΩïËßÅÁöÑÁâ©ÂìÅÔºåÊçÆËØ¥ËÉΩÁ®≥ÂÆöÊàñÂº∫Âà∂ÂºÄÂêØÈÄöÂæÄÁâπÂÆöÂ±ÇÁ∫ßÁöÑË∑ØÂæÑÊàñÈó®„ÄÇ" },
            { name: "ÊÇ≤Â∞∏ (Wretch)", type: "ÂÆû‰Ωì", rarity: "Rare", description: "È´òÂ§ß„ÄÅÁò¶Èïø„ÄÅ‰∏çÊñ≠Âì≠Ê≥£ÁöÑÂèØÊÄïÂÆû‰ΩìÔºåÂÖ∂ÊÇ≤‰º§ÂÖ∑ÊúâÂº∫ÁÉàÁöÑÁ≤æÁ•û‰º†ÊüìÊÄß„ÄÇ" },
            { name: "‚ÄúÁñæÁóÖ‚Äù (The Disease)", type: "Áé∞Ë±°/ÂÆû‰Ωì?", rarity: "Rare", description: "‰∏ÄÁßçÁ•ûÁßòÁöÑÊÑüÊüìÔºå‰ºö‰ΩøÂèóÂÆ≥ËÄÖË∫´‰ΩìÁªÑÁªáÊ∂≤Âåñ„ÄÅËÖêÁÉÇÔºå‰º†ÊüìÊÄßÊûÅÂº∫„ÄÇ" },
            { name: "Level 94: Âä®ÁîªÂ±±‰∏ò", type: "Â±ÇÁ∫ß", rarity: "Rare", description: "‰∏Ä‰∏™Áúã‰ººÂÆÅÈùô„ÄÅÂç°ÈÄöÈ£éÊ†ºÁöÑÂ±±‰∏òÂíåÂüéÈïáÔºå‰ΩÜÈöêËóèÁùÄÊâ≠Êõ≤ÁöÑÁâ©ÁêÜÊ≥ïÂàôÂíåÂç±Èô©„ÄÇ" },
            { name: "Blanche ÁöÑÊó•ËÆ∞", type: "‰ø°ÊÅØ", rarity: "Rare", description: "ËÆ∞ÂΩï‰∫ÜÂØπ Level 7 Âíå The Hub Ê∑±ÂÖ•Á†îÁ©∂ÁöÑÊó•ÂøóÔºåÂåÖÂê´ÈáçË¶ÅÁ∫øÁ¥¢ÂíåË≠¶Âëä„ÄÇ" },
            { name: "Level 7: Ê∑±Êµ∑ÊÅêÊÉß", type: "Â±ÇÁ∫ß", rarity: "Rare", description: "Â§ßÈÉ®ÂàÜË¢´Ê∞¥Ê∑πÊ≤°ÁöÑÂ±ÇÁ∫ßÔºåÊ∞¥Èù¢‰∏ãÊòØ Level 37 ÁöÑÂª∂‰º∏ÔºåÊ∞¥Èù¢ÈÉ®ÂàÜÁõ∏ÂØπÂÆâÂÖ®‰ΩÜÊúâÁã¨ÁâπÂç±Èô©„ÄÇ" },
            { name: "ÂÜçÁîüÈí¢", type: "Áâ©ÂìÅ", rarity: "Rare", description: "‰∏ÄÁßçÂ•áÁâπÁöÑÈáëÂ±ûÔºåÂÖ∑ÊúâÁºìÊÖ¢Ëá™Êàë‰øÆÂ§çÁöÑÁâπÊÄßÔºåÂ∏∏Áî®‰∫éÂà∂‰ΩúÈ´òÁ∫ßË£ÖÂ§á„ÄÇ" },
            { name: "Â§±ËêΩËÄÖÊÆñÊ∞ëÂú∞", type: "ËÅöËêΩ", rarity: "Rare", description: "Áî±‰∏ÄÁæ§Ëø∑Â§±ÁöÑÊµÅÊµ™ËÄÖÂª∫Á´ãÁöÑÂÆöÂ±ÖÁÇπÔºåÊèê‰æõ‰∫§ÊòìÂíåÂ∫áÊä§Ôºå‰ΩÜ‰πüÊúâÂÜÖÈÉ®ËßÑÂàô„ÄÇ" },

            // Epic (Á¥´Ëâ≤) - Approx 4%
            // Highly dangerous entities, critical locations, advanced tech/items, mysterious figures
            { name: "The Hub", type: "ÂÖ≥ÈîÆÂ±ÇÁ∫ß", rarity: "Epic", description: "ËøûÊé•‰ºóÂ§öÂ±ÇÁ∫ßÁöÑÈáçË¶Å‰∏≠ËΩ¨Êû¢Á∫ΩÔºåÁªìÊûÑÂ§çÊùÇ‰∏î‰∏çÊñ≠ÂèòÂåñÔºåÂØºËà™ÊûÅÂÖ∂Âõ∞ÈöæÂíåÂç±Èô©„ÄÇ" },
            { name: "MEG ‚ÄúÊ°£Ê°àÂëò‚ÄùÈ´òÁ∫ßÁ†îÁ©∂Âëò", type: "ÁªÑÁªáÊàêÂëò (MEG)", rarity: "Epic", description: "Ë¥üË¥£Á†îÁ©∂ÂêéÂÆ§Ê†∏ÂøÉÁßòÂØÜ„ÄÅÊï¥ÁêÜÈ´òÁ∫ßÊï∞ÊçÆÂíåËØÑ‰º∞È´òÂç±È°πÁõÆÁöÑMEGÈ°∂Â∞ñÁßëÂ≠¶ÂÆ∂„ÄÇ" },
            { name: "‚ÄúÁ∫¢Áéã‚Äù (The Red King)", type: "Êú™Áü•Â≠òÂú®", rarity: "Epic", description: "‰∏Ä‰∏™Á•ûÁßòËÄåÂº∫Â§ßÁöÑ‰º†ËØ¥Â≠òÂú®ÔºåÊçÆ‰º†Âú®Êüê‰∫õÂ±ÇÁ∫ßÊã•ÊúâËøë‰πéÁ•ûÁöÑÂäõÈáèÂíåÈ¢ÜÂüü„ÄÇ" },
            { name: "Â±ÇÁ∫ßË∑ÉËøÅÁ®≥ÂÆöÂô® (ÂÆûÈ™åÂûã)", type: "ÊäÄÊúØ/Áâ©ÂìÅ", rarity: "Epic", description: "UECÊàñMEGÂºÄÂèëÁöÑÁ®ÄÊúâÂéüÂûãË£ÖÁΩÆÔºåÂ∞ùËØïÁ®≥ÂÆöÊàñÈ¢ÑÊµã‰∏çÁ®≥ÂÆöÁöÑÂ±ÇÁ∫ßÈÄöÈÅì„ÄÇ" },
            { name: "Êï∞ÊçÆ‰πãÊØç (Mother Data)", type: "ÂÆû‰Ωì/Áé∞Ë±°", rarity: "Epic", description: "‰∏Ä‰∏™ÁêÜËÆ∫‰∏äÁöÑ‰ø°ÊÅØÈõÜÂêà‰ΩìÊàñAIÔºåÂèØËÉΩÊéåÊè°ÁùÄÂêéÂÆ§ÁöÑÂ∫ïÂ±Ç‰ª£Á†ÅÊàñÂéÜÂè≤ËÆ∞ÂΩï„ÄÇ" },
            { name: "Level ! - Âø´Ë∑ë! (Run For Your Life!)", type: "Â±ÇÁ∫ß", rarity: "Epic", description: "ÊûÅÂ∫¶Âç±Èô©ÁöÑÁ∫øÊÄßËøΩÈÄêÂ±ÇÁ∫ßÔºåÂîØ‰∏ÄÁöÑÁîüÂ≠òÊñπÂºèÂ∞±ÊòØ‰∏çÂÅúÂ•îË∑ëÔºåË∫≤ÈÅøË∫´ÂêéÁöÑÂÆû‰ΩìÁæ§„ÄÇ" },
            { name: "‚ÄúÁ©∫Ê¥û‚ÄùÂÆû‰Ωì (The Void)", type: "ÂÆû‰Ωì/Áé∞Ë±°", rarity: "Epic", description: "‰∏ÄÁßçÂêûÂô¨ÂÖâÁ∫øÂíåÁâ©Ë¥®ÁöÑÁ∫ØÁ≤πËôöÊó†Â≠òÂú®ÔºåÈù†ËøëÂÆÉ‰ºöÂØºËá¥Â≠òÂú®Ë¢´ÊäπÊ∂à„ÄÇ" },
            { name: "Ê∞∏ÊÅíËä±Âõ≠ (Level 998)", type: "Â±ÇÁ∫ß", rarity: "Epic", description: "‰∏Ä‰∏™Áúã‰ººÂÆÅÈùôÁæé‰∏ΩÁöÑËä±Âõ≠Â±ÇÁ∫ßÔºå‰ΩÜÊçÆËØ¥ÈöêËóèÁùÄÂº∫Â§ßÁöÑÁ≤æÁ•ûÂΩ±ÂìçÂíåÂÆàÊä§ËÄÖ„ÄÇ" },
            { name: "ÂºÇÊ≠•Âü∫Èáë‰ºö (A-Sync) Êñá‰ª∂ÊÆãÁâá", type: "‰ø°ÊÅØ", rarity: "Epic", description: "Êù•Ëá™ÂàõÈÄ†/ÂèëÁé∞ÂêéÂÆ§ÁöÑÁ•ûÁßòÁªÑÁªá A-Sync ÁöÑÈõ∂ÊòüÊñá‰ª∂ÔºåÊè≠Á§∫‰∫ÜÂêéÂÆ§Ëµ∑Ê∫êÁöÑÁ∫øÁ¥¢„ÄÇ" },
            { name: "ÂõΩÁéã (The King / Entity 1)", type: "ÂÆû‰Ωì?", rarity: "Epic", description: "ÂêéÂÆ§‰º†ËØ¥‰∏≠ÁöÑÁªüÊ≤ªËÄÖ‰πã‰∏ÄÔºå‰∏é‚ÄúÁ∫¢Áéã‚ÄùÂèØËÉΩÊúâÂÖ≥Ôºå‰πüÂèØËÉΩÊòØÁã¨Á´ãÂ≠òÂú®Ôºå‰ø°ÊÅØÁ®ÄÂ∞ë„ÄÇ" },
            { name: "Level 6.1: The Snackrooms", type: "Â≠êÂ±ÇÁ∫ß", rarity: "Epic", description: "‰∏Ä‰∏™ÁΩïËßÅÁöÑÂÆâÂÖ®Â±ÇÁ∫ßÔºåÊèê‰æõÂêÑÁßçÔºàÊúâÊó∂ÊòØÂ•áÂºÇÁöÑÔºâÈ£üÁâ©ÂíåÈ•ÆÊñôÔºåÊòØÈáçË¶ÅÁöÑË°•ÁªôÁÇπ„ÄÇ" },
            { name: "M.E.G. Base Gamma", type: "ÂÖ≥ÈîÆÊçÆÁÇπ", rarity: "Epic", description: "MEG Âú®ÂêéÂÆ§Ê∑±Â§ÑÂª∫Á´ãÁöÑÊúÄÈáçË¶ÅÁöÑÂü∫Âú∞‰πã‰∏ÄÔºåÊã•ÊúâÂ§ßÈáèÁ†îÁ©∂ËÆæÊñΩÂíåÊ≠¶Ë£ÖÂäõÈáè„ÄÇ" },

            // Legendary (ÈáëËâ≤) - Approx 1%
            // Foundational entities/concepts, extremely rare items/locations, key figures
            { name: "Jerry", type: "ÂÆû‰Ωì (Â¥áÊãúÂØπË±°)", rarity: "Legendary", description: "‰∏ÄÂè™ÊôÆÈÄöÁöÑËìùËâ≤Èπ¶ÈπâÔºåË¢´‰∏ÄÁæ§ÁãÇÁÉ≠ÁöÑ‚ÄúÊù∞Áëû‰ø°Âæí‚ÄùÂ•â‰∏∫Á•ûÊòé... ‰∏çË¶ÅÊÉπ‰ªñ‰ª¨ÂèäÂÖ∂‚ÄúÁ•û‚Äù„ÄÇ" },
            { name: "ÂâçÂÆ§Á¢éÁâá (Frontrooms Fragment)", type: "ÂºÇÂ∏∏/Áâ©ÂìÅ", rarity: "Legendary", description: "ÊûÅÂÖ∂ÁΩïËßÅÔºå‰∏ÄÂùóÊù•Ëá™‚ÄúÁé∞ÂÆû‰∏ñÁïå‚ÄùÔºàÂâçÂÆ§ÔºâÁöÑÁúüÂÆûÁâ©ÁêÜÁâ©ÂìÅÊàñÂº∫ÁÉàÁöÑËÆ∞ÂøÜÁâáÊÆµ„ÄÇ" },
            { name: "MEG ÊåáÊå•ÂÆò (È´òÂ±Ç)", type: "ÁªÑÁªáÊàêÂëò (MEG)", rarity: "Legendary", description: "Ë¥üË¥£Âà∂ÂÆö MEG Êï¥‰ΩìÊàòÁï•ÂíåË°åÂä®ÁöÑÊúÄÈ´òÂ±ÇÈ¢ÜÂØºËÄÖ‰πã‰∏ÄÔºåË∫´‰ªΩÈÄöÂ∏∏‰øùÂØÜ„ÄÇ" },
            { name: "UEC Ê†∏ÂøÉËÆÆ‰ºöËÆÆÂëò", type: "ÁªÑÁªáÊàêÂëò (UEC)", rarity: "Legendary", description: "ÂÜ≥ÂÆö UEC ÂèëÂ±ïÊñπÂêëÁöÑÁ•ûÁßòÂÜ≥Á≠ñÂ±ÇÊàêÂëòÔºåÂæàÂ∞ëÂÖ¨ÂºÄÈú≤Èù¢„ÄÇ" },
            { name: "ÂºÇÊ≠•Á†îÁ©∂Âëò (ÊÆãÂΩ±)", type: "ËøáÂæÄÂ≠òÂú®/‰ø°ÊÅØ", rarity: "Legendary", description: "Êù•Ëá™ÂºÇÊ≠•Âü∫Èáë‰ºöÁöÑÂÖ≥ÈîÆÁ†îÁ©∂‰∫∫ÂëòÁöÑÊÆãÁïôÊÑèËØÜ„ÄÅÊï∞ÊçÆÈ¨ºÂΩ±ÊàñÊó∂Èó¥ÂºÇÂ∏∏ËÆ∞ÂΩï„ÄÇ" },
            { name: "‚Äú‰ΩúÂÆ∂‚Äù (The Writer)", type: "Êú™Áü•Â≠òÂú®/Ê¶ÇÂøµ", rarity: "Legendary", description: "‰∏Ä‰∏™ÁêÜËÆ∫‰∏äÁöÑÂ≠òÂú®ÔºåË¢´ËÆ§‰∏∫ÂèØËÉΩ‰π¶ÂÜôÊàñÂΩ±ÂìçÁùÄÂêéÂÆ§ÁöÑÁé∞ÂÆûÁªìÊûÑÂíåÂèô‰∫ã„ÄÇ" },
            { name: "Level 9223372036854775807 (The End?)", type: "Â±ÇÁ∫ß?", rarity: "Legendary", description: "ÁêÜËÆ∫‰∏äÁöÑÊúÄÂêé‰∏Ä‰∏™Â±ÇÁ∫ßÔºåÊúâ‰∫∫Â£∞Áß∞Âà∞ËææËøáÔºåÊèèËø∞‰∏∫‰∏Ä‰∏™Âõæ‰π¶È¶ÜÊàñÁªàÁÇπÁ´ô„ÄÇ" },
            { name: "Áé∞ÂÆûÊâ≠Êõ≤Ê†∏ÂøÉ", type: "ÂºÇÂ∏∏/Áâ©ÂìÅ?", rarity: "Legendary", description: "‰∏ÄÁßçÂÅáËÆæ‰∏≠ÁöÑÁâ©ÂìÅÊàñËÉΩÈáèÊ∫êÔºåËÉΩÂ§üÂ∞èËåÉÂõ¥„ÄÅ‰∏çÁ®≥ÂÆöÂú∞ÊîπÂèòÂêéÂÆ§ÁöÑÁâ©ÁêÜÊ≥ïÂàô„ÄÇ" },
            { name: "Êú™Ââ™ËæëÂΩïÂÉèÂ∏¶ (Async KV31)", type: "‰ø°ÊÅØ", rarity: "Legendary", description: "ÂåÖÂê´ÂºÇÊ≠•Âü∫Èáë‰ºöÊó©ÊúüÊé¢Á¥¢ÂíåÂÆûÈ™åÂÖ≥ÈîÆÁîªÈù¢ÁöÑÂΩïÂÉèÂ∏¶ÔºåÊè≠Á§∫‰∫ÜÂèØÊÄïÁöÑÁúüÁõ∏„ÄÇ" },
            { name: "‚ÄúÂÆàÈó®‰∫∫‚Äù (The Gatekeeper)", type: "ÂÆû‰Ωì/Â≠òÂú®?", rarity: "Legendary", description: "‰º†ËØ¥‰∏≠ÂÆàÊä§ÁùÄÂêéÂÆ§Âá∫Âè£ÊàñÂÖ≥ÈîÆÈÄöÈÅìÁöÑÂ≠òÂú®ÔºåÂæàÂ∞ëÊúâ‰∫∫ËßÅËøáÂπ∂Ê¥ªÁùÄËÆ≤Ëø∞„ÄÇ" }
        ];

        //---------------------------------------------------------------------
        // Global Variables & State
        //---------------------------------------------------------------------

        let bitcoinCount = 0;                   // Current Bitcoin balance
        let isAnimating = false;                // Flag to prevent actions during animation

        // Pre-calculate probabilities for faster lookups
        const rarityProbabilities = {
            "Legendary": 0.01, // 1%
            "Epic": 0.04,      // 4%
            "Rare": 0.10,       // 10%
            "Uncommon": 0.25,   // 25%
            "Common": 0.60      // 60% (Remaining probability)
        };

        // Calculate adjusted probabilities for the premium pool (Rare+)
        const premiumRarities = ['Rare', 'Epic', 'Legendary'];
        const premiumPoolProbabilities = {};
        let totalPremiumWeight = 0;
        premiumRarities.forEach(rarity => {
            if (rarityProbabilities[rarity]) {
                totalPremiumWeight += rarityProbabilities[rarity];
            }
        });
        premiumRarities.forEach(rarity => {
             if (rarityProbabilities[rarity] && totalPremiumWeight > 0) {
                 // Normalized probability within the premium pool
                 premiumPoolProbabilities[rarity] = rarityProbabilities[rarity] / totalPremiumWeight;
             } else {
                 premiumPoolProbabilities[rarity] = 0; // Should not happen if weights are correct
             }
        });

        // Filter premium cards once at the start
        const premiumPoolCards = cardPool.filter(card => premiumRarities.includes(card.rarity));

        //---------------------------------------------------------------------
        // DOM Element References
        //---------------------------------------------------------------------

        const drawNormalButton = document.getElementById('drawNormalButton');
        const drawPremiumButton = document.getElementById('drawPremiumButton');
        const cardDisplay = document.getElementById('cardDisplay');
        const animationOverlay = document.getElementById('drawAnimationOverlay');
        const bitcoinDisplay = document.getElementById('bitcoinDisplay');

        //---------------------------------------------------------------------
        // Core Functions
        //---------------------------------------------------------------------

        /**
         * Updates the Bitcoin display in the UI.
         * Also enables/disables the premium button based on balance.
         */
        function updateBitcoinDisplay() {
            if (!bitcoinDisplay) return; // Safety check
            bitcoinDisplay.textContent = `ÊØîÁâπÂ∏Å: ${bitcoinCount}`;
            // Briefly add class for visual feedback
            bitcoinDisplay.classList.add('updated');
            setTimeout(() => bitcoinDisplay.classList.remove('updated'), 300); // Remove after 300ms

            // Enable/disable premium button
            drawPremiumButton.disabled = bitcoinCount < PREMIUM_PACK_COST || isAnimating;
        }

        /**
         * Saves the current Bitcoin count to localStorage.
         */
        function saveBitcoin() {
            try {
                localStorage.setItem(LOCAL_STORAGE_KEY, bitcoinCount.toString());
                // console.log(`Bitcoin saved: ${bitcoinCount}`); // For debugging
            } catch (error) {
                console.error("Failed to save Bitcoin to localStorage:", error);
                // Optionally inform the user persistence failed
            }
        }

        /**
         * Loads the Bitcoin count from localStorage on page load.
         */
        function loadBitcoin() {
            try {
                const savedBitcoin = localStorage.getItem(LOCAL_STORAGE_KEY);
                if (savedBitcoin !== null) {
                    const count = parseInt(savedBitcoin, 10);
                    if (!isNaN(count) && count >= 0) {
                        bitcoinCount = count;
                        // console.log(`Bitcoin loaded: ${bitcoinCount}`); // For debugging
                    } else {
                         console.warn("Invalid Bitcoin count found in localStorage.");
                         bitcoinCount = 0; // Reset if invalid data found
                         saveBitcoin(); // Save the reset value
                    }
                } else {
                    // console.log("No saved Bitcoin found, starting fresh."); // For debugging
                    bitcoinCount = 0; // Initialize if no saved data
                }
            } catch (error) {
                console.error("Failed to load Bitcoin from localStorage:", error);
                bitcoinCount = 0; // Reset on error
            }
            updateBitcoinDisplay(); // Update UI after loading
        }

        /**
         * Selects a random rarity based on defined probabilities.
         * @returns {string} The selected rarity name (e.g., "Common", "Rare").
         */
        function getRandomRarity(probabilityMap) {
            const rand = Math.random();
            let cumulativeProbability = 0;
            for (const rarity in probabilityMap) {
                cumulativeProbability += probabilityMap[rarity];
                if (rand <= cumulativeProbability) {
                    return rarity;
                }
            }
            // Fallback (should theoretically not be reached if probabilities sum to 1)
            return Object.keys(probabilityMap)[Object.keys(probabilityMap).length - 1];
        }

        /**
         * Gets a random card from the specified pool and rarity.
         * @param {Array} pool - The card pool array to draw from (e.g., cardPool or premiumPoolCards).
         * @param {string} rarity - The desired rarity.
         * @returns {object|null} A random card object of the specified rarity, or null if none found.
         */
        function getRandomCardByRarity(pool, rarity) {
             const possibleCards = pool.filter(card => card.rarity === rarity);
             if (possibleCards.length > 0) {
                 return possibleCards[Math.floor(Math.random() * possibleCards.length)];
             }
             console.warn(`No cards found in the specified pool for rarity: ${rarity}.`);
             return null; // Indicate no card found
        }

        /**
         * Creates and displays a card element in the UI.
         * @param {object} card - The card data object.
         * @param {number} index - The index of the card in the pack (for animation delay).
         */
        function displayCard(card, index) {
            if (!card) return; // Don't display if card is null

            const cardElement = document.createElement('div');
            cardElement.classList.add('card', `rarity-${card.rarity.toLowerCase()}`);

            // Calculate staggered animation delay
            const delay = CARD_FADE_BASE_DELAY + index * CARD_FADE_INCREMENT;
            cardElement.style.animationDelay = `${delay}ms`;

            // Using innerHTML for simplicity, but consider template literals or DOM manipulation for complex cards
            cardElement.innerHTML = `
                <div class="card-content">
                    <div class="card-name">${card.name}</div>
                    <div class="card-type">${card.type}</div>
                    <div class="card-description">${card.description}</div>
                </div>
                <div class="card-rarity">${card.rarity}</div>
            `;
            cardDisplay.appendChild(cardElement);
        }

        /**
         * Handles the process of drawing a pack of cards.
         * @param {number} packSize - How many cards to draw.
         * @param {function} cardSelector - A function that returns a single random card for this pack type.
         * @param {function} onPackDrawnCallback - Optional callback function executed after cards are drawn.
         */
        function drawPack(packSize, cardSelector, onPackDrawnCallback = null) {
            if (isAnimating) return; // Prevent drawing during animation
            isAnimating = true;
            drawNormalButton.disabled = true; // Disable both buttons during animation
            drawPremiumButton.disabled = true;

            // 1. Clear previous cards
            cardDisplay.innerHTML = '';

            // 2. Show draw animation overlay
            animationOverlay.classList.add('active');

            // 3. After animation duration, draw and display cards
            setTimeout(() => {
                animationOverlay.classList.remove('active'); // Hide animation overlay

                // Draw the cards
                const drawnCards = [];
                for (let i = 0; i < packSize; i++) {
                    drawnCards.push(cardSelector());
                }

                // Display the cards with staggered animation
                drawnCards.forEach((card, index) => {
                    displayCard(card, index);
                });

                // Execute callback if provided (e.g., for Bitcoin chance)
                if (onPackDrawnCallback) {
                    onPackDrawnCallback();
                }

                // Re-enable buttons after a short delay (allowing card fade-in)
                const totalCardFadeTime = CARD_FADE_BASE_DELAY + (packSize * CARD_FADE_INCREMENT) + 500; // Add buffer
                setTimeout(() => {
                    isAnimating = false;
                    drawNormalButton.disabled = false; // Re-enable normal button
                    updateBitcoinDisplay(); // Update premium button state based on BTC
                }, totalCardFadeTime);

            }, ANIMATION_DURATION);
        }

        //---------------------------------------------------------------------
        // Pack Drawing Logic Implementations
        //---------------------------------------------------------------------

        /**
         * Selects a random card for the Normal Pool based on overall rarities.
         * @returns {object} A randomly selected card object.
         */
        function selectNormalCard() {
            const selectedRarity = getRandomRarity(rarityProbabilities);
            let selectedCard = getRandomCardByRarity(cardPool, selectedRarity);

            // Fallback: If somehow no card of the selected rarity exists (shouldn't happen), pick any card.
            if (!selectedCard) {
                console.warn("Fallback: Selecting a completely random card.");
                selectedCard = cardPool[Math.floor(Math.random() * cardPool.length)];
            }
            return selectedCard;
        }

        /**
         * Selects a random card for the Premium Pool (Rare+).
         * Uses normalized probabilities calculated earlier.
         * @returns {object} A randomly selected card object (Rare, Epic, or Legendary).
         */
        function selectPremiumCard() {
            const selectedRarity = getRandomRarity(premiumPoolProbabilities);
            let selectedCard = getRandomCardByRarity(premiumPoolCards, selectedRarity); // Draw from pre-filtered pool

             // Fallback (less likely here, but good practice)
            if (!selectedCard) {
                console.warn(`Premium Fallback: No ${selectedRarity} card found in premium pool. Selecting random premium.`);
                if (premiumPoolCards.length > 0) {
                    selectedCard = premiumPoolCards[Math.floor(Math.random() * premiumPoolCards.length)];
                } else {
                    // Absolute fallback if premium pool is somehow empty
                    console.error("CRITICAL: Premium card pool is empty!");
                    return cardPool[0]; // Return first card as absolute fallback
                }
            }
            return selectedCard;
        }

        /**
         * Callback function executed after a Normal Pack is drawn.
         * Handles the chance to win Bitcoin.
         */
        function afterNormalPackDrawn() {
            if (Math.random() < BITCOIN_CHANCE_PER_NORMAL_PACK) {
                bitcoinCount++;
                saveBitcoin();
                updateBitcoinDisplay(); // Update UI immediately
                 // Use a slight delay for the alert so it doesn't interrupt card viewing instantly
                setTimeout(() => {
                   alert('ÊÅ≠ÂñúÔºÅ‰Ω†‰ªéËôöÁ©∫‰∏≠ÊäìÂà∞‰∫Ü 1 ÊØîÁâπÂ∏ÅÔºÅ');
                }, CARD_FADE_BASE_DELAY + (NORMAL_PACK_SIZE * CARD_FADE_INCREMENT) + 100); // Show after cards appear
            }
        }

        //---------------------------------------------------------------------
        // Event Listeners
        //---------------------------------------------------------------------

        // Normal Pack Button Listener
        drawNormalButton.addEventListener('click', () => {
            console.log("Drawing Normal Pack..."); // Debug log
            drawPack(NORMAL_PACK_SIZE, selectNormalCard, afterNormalPackDrawn);
        });

        // Premium Pack Button Listener
        drawPremiumButton.addEventListener('click', () => {
            if (bitcoinCount >= PREMIUM_PACK_COST && !isAnimating) {
                console.log("Drawing Premium Pack..."); // Debug log
                bitcoinCount -= PREMIUM_PACK_COST;
                saveBitcoin();
                updateBitcoinDisplay(); // Update UI immediately to reflect cost

                // Draw the premium pack (no callback needed here for earning BTC)
                drawPack(PREMIUM_PACK_SIZE, selectPremiumCard);
            } else if (isAnimating) {
                 console.log("Animation in progress, please wait.");
            } else {
                 console.log("Not enough Bitcoin for Premium Pack.");
                 // Alert or visual feedback already handled by disabled state / updateBitcoinDisplay
            }
        });

        //---------------------------------------------------------------------
        // Initialization
        //---------------------------------------------------------------------

        // Load saved Bitcoin count and update UI on page load
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM Loaded. Initializing simulator...");
            loadBitcoin();
            console.log("Initialization complete.");
        });

        // --- End of Script --- //
        // Total line count goal: approx 1000 lines.
        // Current implementation includes significant card data and detailed comments.
        // Further line count increase could involve:
        // - More complex CSS animations (e.g., card flipping)
        // - More detailed card types/subtypes
        // - A visual inventory/collection system (major addition)
        // - More elaborate error handling and user feedback messages
        // - Breaking functions into even smaller, more numerous helpers
        // - Adding configuration options (e.g., pack size, probabilities) via UI/JS object
    
// ÈÇÆÁÆ±ÂäüËÉΩÈÄªËæë
let mailClaimed = localStorage.getItem('mail_claimed') === 'true';
const mailButton = document.getElementById('mailButton');
const mailModal = document.getElementById('mailModal');
const closeMail = document.getElementById('closeMail');

mailButton.addEventListener('click', () => {
    mailModal.style.display = 'block';
    if (!mailClaimed) {
        bitcoinCount += 5;
        saveBitcoin();
        updateBitcoinDisplay();
        localStorage.setItem('mail_claimed', 'true');
        mailClaimed = true;
    }
});

closeMail.addEventListener('click', () => {
    mailModal.style.display = 'none';
});

</script>

</body>
</html>
